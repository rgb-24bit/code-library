#+TITLE: Code snippet collection

* Table of Contents                                       :TOC_4_gh:noexport:
- [[#file-operation-related][File operation related]]
- [[#misc][Misc]]

* File operation related
  + Read all the contents of the file.
    #+BEGIN_SRC java
      import java.io.IOException;
      import java.nio.file.Files;
      import java.nio.file.Paths;

      public static String readAll(String filename, String charsetName) {
        try {
          return new String(Files.readAllBytes(Paths.get(filename)), charsetName);
        } catch (IOException e) {
          return null;
        }
      }
    #+END_SRC

  + Write all the contents to the file.
    #+BEGIN_SRC java
      import java.io.IOException;
      import java.nio.file.Files;
      import java.nio.file.Paths;

      public static void writeAll(String filename, String charsetName, String content) {
        try {
          Files.write(Path.get(filename), content.getBytes(charsetName));
        } catch (IOException e) {
          e.printStackTrace();
        }
      }
    #+END_SRC

  + Expand environment variables in the path.
    #+BEGIN_SRC java
      import java.util.regex.Matcher;
      import java.util.regex.Pattern;

      public static String expandvars(String path) {
        String result = new String(path);

        Pattern pt = Pattern.compile("\\$\\{(\\w+)\\}");
        Matcher match = pt.matcher(path);

        while (match.find()) {
          String var = match.group(1);
          String val = System.getenv(var);
          if (val != null) {
            result = result.replace("${" + var + "}", val);
          }
        }

        return result;
      }
    #+END_SRC

    Use like this:
    #+BEGIN_SRC java
      String path = expandvars("${HOME}/.cache");
    #+END_SRC

* Misc
  + Similar to the as operation in CSharp.
    #+BEGIN_SRC java
      public static <T> T as(Class<T> clazz, Object o){
        if(clazz.isInstance(o)){
          return clazz.cast(o);
        }
        return null;
      }
    #+END_SRC
  
